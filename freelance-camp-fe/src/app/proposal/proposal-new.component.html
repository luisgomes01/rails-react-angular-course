<div class="card container form-container">
  <h1>Create new proposal</h1>

  <div class="row">
    <div class="col-md-6">
      <div>
        <form (ngSubmit)="createProposal(proposal)" #proposalForm="ngForm" class="d-flex flex-column gap-3 h-100">
          <div class="form-group">
            <label for="customer">Customer Name</label>
            <input
              class="form-control"
              type="text"
              id="customer"
              placeholder="Test Company"
              required
              name="customer"
              #customer="ngModel"
              [(ngModel)]="proposal.customer"
            />

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="customer.valid || customer.pristine"
            >
              Customer name is required
            </div>
          </div>

          <div class="form-group">
            <label for="portfolio_url">Portfolio URL</label>
            <input
              class="form-control"
              type="text"
              id="portfolio_url"
              placeholder="your portfolio link"
              required
              name="portfolio_url"
              #portfolio_url="ngModel"
              [(ngModel)]="proposal.portfolio_url"
            />

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="portfolio_url.valid || portfolio_url.pristine"
            >
              Portfolio URL is required
            </div>
          </div>

          <div class="form-group">
            <label for="tools">Tools</label>
            <input
              class="form-control"
              type="text"
              id="tools"
              placeholder="Rails, Nextjs, Nest..."
              required
              name="tools"
              #tools="ngModel"
              [(ngModel)]="proposal.tools"
            />

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="tools.valid || tools.pristine"
            >
              A list of tools are required
            </div>
          </div>

          <div class="form-group">
            <label for="estimated_hours">Estimated Hours</label>
            <input
              class="form-control"
              type="number"
              id="estimated_hours"
              required
              name="estimated_hours"
              #estimated_hours="ngModel"
              [(ngModel)]="proposal.estimated_hours"
            />

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="estimated_hours.valid || estimated_hours.pristine"
            >
              You need to enter your estimated hours
            </div>
          </div>

          <div class="form-group">
            <label for="hourly_rate">Hourly Rate</label>
            <div class="input-group">
              <span class="input-group-text">$</span>
              <input
                class="form-control"
                type="number"
                id="hourly_rate"
                required
                name="hourly_rate"
                #hourly_rate="ngModel"
                [(ngModel)]="proposal.hourly_rate"
              />
            </div>

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="hourly_rate.valid || hourly_rate.pristine"
            >
              You need to enter your hourly rate for the project
            </div>
          </div>

          <div class="form-group">
            <label for="weeks_to_complete">Weeks to Complete</label>
            <input
              class="form-control"
              type="number"
              id="weeks_to_complete"
              required
              name="weeks_to_complete"
              #weeks_to_complete="ngModel"
              [(ngModel)]="proposal.weeks_to_complete"
            />

            <div
              class="alert alert-danger mt-2 mb-0"
              [hidden]="weeks_to_complete.valid || weeks_to_complete.pristine"
            >
              You need to enter the weeks you estimate to complete the project
            </div>
          </div>

          <div class="form-group">
            <label for="client_email">Client Email <em>(Optional)</em></label>
            <input
              class="form-control"
              type="email"
              id="client_email"
              placeholder="Your email"
              name="client_email"
              #client_email="ngModel"
              [(ngModel)]="proposal.client_email"
            />
          </div>

          <button
            class="btn btn-outline-primary btn-lg"
            [disabled]="!proposalForm.valid"
            [hidden]="submitted"
          >
            Generate Proposals
          </button>
        </form>
      </div>
    </div>

    <div class="col-md-6">
      <div>
        <p>
          Hi <span class="text-primary">{{ proposal.customer }}</span
          >,
        </p>

        <p>
          It was a pleasure getting to meet with you and review your project
          requirements, I believe it is a great fit for the types of
          applications that I build out. Please feel free to check out some of
          my past projects
          <a href="{{ proposal.portfolio_url }}">here</a>.
        </p>

        <p>
          To successfully build out the application I will be utilizing
          <span class="text-primary">{{ proposal.tools }}</span
          >, and a number of other tools to ensure that the project follows
          industry wide best practices.
        </p>

        <p>
          Ensuring that you are fully informed is one of my top priorities, so
          in addition to incorporating everything that we discussed, I will also
          be creating a project management dashboard and sending you a project
          update message daily so that you can have a transparent view of the
          development as it takes place.
        </p>

        <p>
          To accomplish the project and meet the requirements that we discussed,
          I am estimating that it will take
          <span class="text-primary">{{ proposal.estimated_hours }}</span> hours
          in development time to complete. The project should take
          <span class="text-primary">{{ proposal.weeks_to_complete }}</span>
          weeks to complete and with my hourly rate of
          <span class="text-primary">{{ proposal.hourly_rate }}</span
          >/hour, the estimated total will be
          <span class="text-primary">{{
            proposal.hourly_rate * proposal.estimated_hours
              | currency : "USD" : true : ".0"
          }}</span
          >.
        </p>

        <p>
          The next step from here is to set up a meeting to finalize the project
          and sign contracts.
        </p>

        <p>I am excited to working with you and build out this project.</p>
      </div>
    </div>
  </div>
</div>
